\documentclass[11pt,a4paper]{ivoa}
\input tthdefs
\usepackage{todonotes}
\usepackage{array}
\usepackage{soul}

\usepackage{graphicx}

\newcommand{\dataciteterm}[1]{\colorbox{lightgray}{DataCite:\textbf{#1}}}
\newcommand{\important}[1]{
	\begin{bigdescription}
		\item \color{ivoacolor}\textbf{Note} #1
	\end{bigdescription}
}




\title{Best practices for the creation of and metadata for digital object identifiers in astronomy archives}

% see ivoatexDoc for what group names to use here; use \ivoagroup[IG] for
% interest groups.
\ivoagroup[IG]{Data Curation and Preservation}

\author[https://orcid.org/0000-0003-0666-6367]{August Muench}
\author[https://orcid.org/0000-0003-4868-5873]{Gilles Landais}
\author[https://orcid.org/0000-0003-3073-0605]{Raffaele D'Abrusco}
\author[https://orcid.org/0000-0002-8300-9443]{Anne Raugh}
\author[https://orcid.org/0000-0003-4264-2450]{Edwin Henneken}
\author[https://orcid.org/0000-0001-7915-5571]{Baptiste Cecconi}
\author[]{to complete: Alberto Accomazzi ?, ESA people ?}
\editor{August Muench, Gilles Landais}

% \previousversion[????URL????]{????Concise Document Label????}
\previousversion{This is a draft}


\begin{document}
\todo{This is only an outline! Everything is still to be done.}

\begin{abstract}
Many astronomy archives are minting digital object identifiers (DOI) for datasets and services. This document aims at summarizing current workflows for creating and using DOIs, diagnose issues in the metadata of existing DOIs, and develop best practices for workflows and metadata for future DOI deployment. This note is focused on archives in Astronomy, Planetary Science, and Heliophysics. Additional domains may be considered at a later time.
\end{abstract}


%-------------------------------------------------------------------------------------------
\section*{Acknowledgments}

ESA (C.Arviset, M-H. Sarmiento, A.Masson), ADS (A.Accomazzi) and IVOA members active in DataCP sessions.

%-------------------------------------------------------------------------------------------
\section*{Conformance-related definitions}

The words ``MUST'', ``SHALL'', ``SHOULD'', ``MAY'', ``RECOMMENDED'', and
``OPTIONAL'' (in upper or lower case) used in this document are to be
interpreted as described in IETF standard RFC2119 \citep{std:RFC2119}.

The \emph{Virtual Observatory (VO)} is a general term for a collection of federated resources that can be used to conduct astronomical research, education, and outreach.
The \href{https://www.ivoa.net}{International Virtual Observatory Alliance (IVOA)} is a global collaboration of separately funded projects to develop standards and infrastructure that enable VO applications.


%-------------------------------------------------------------------------------------------
\section{Introduction}
\label{sec:intro}


\subsection{General observations} 
We focus on roles of digital object identifiers (DOIs) rather than the full landscape of FAIR data \citep{Wilkinson2016}. It is beyond the scope of this document to address all aspects of FAIRness. We consider that it is also unreasonable for DOIs to be laden with the problems of enabling all aspects of FAIRness. Instead we aim for this document to guide archives with achieving compliance for specific aspects of enabling FAIR data. In this document we are using DataCite Commons \footnote{\url{https://commons.datacite.org}}. This document adopts DataCite Metadata Schema 4.6. We choose relevant examples from existing DOI taken in approximately 75000 dataset DOIs in astronomy (See Table \ref{tab:astroDOIs1}).



\subsection{DOI landscape}
DOIs are a key element of the scholarly publication process. It is a persistent identifier for resources, which includes both a URL and metadata. The DOI is mostly used for sustainable resources such as scholarly journal articles, for datasets and softwares.\\


The DOI is a persistent identifier that emerges today among other identifiers such as the ORCID\footnote{\url{https://orcid.org/}}, for authors, the RoR\footnote{\url{https://ror.org/}} for organization or the RAID\footnote{\url{https://raid.org/}} for projects.

It enables a resource to be reliably identified, regardless of the professional network in which it is published. It improves traceability and citation with standard metadata that can be harvested and reused. 

The DOI metadata can also include references and related products. This network of resources builds a so-called scholarly (or scientific) knowledge graph\footnote{\url{https://doi.org/10.1162/qss_e_00160}}.\\


There are several DOI providers. CrossRef\footnote{https://www.crossref.org/} is the main DOI provider for scholarly communications. Datacite\footnote{https://datacite.org/} is the main DOI provider for data publication. Each provider has a specific metadata schema, extending DublinCore, and design to support the scope of the resources related to the DOI they provide.
Data Centers minting DOIs for their datasets should carefully inform and curate the metadata registered in the DOI provider database.\\


DOIs are also used for grants (see, e.g., https://doi.org/10.3030/824064, which is redirecting to the ESCAPE project page on the CORDIS web site of European Commission), for instruments (see, e.g., the recent Datacite implementation of the RDA PID for instrument recommendation), for repositories (see, e.g., http://doi.org/10.17616/R31NJMS9, which is redirecting to the PADC record in the Re3data registry), or for FAIR concepts and resources (see, e.g., https://doi.org/10.25504/FAIRsharing.L4Q3H9, which is an identifier for the concept of “IVOA identifier” in FAIRsharing’s registry). It is thus not always used for scholarly citations, but also as persistent identifiers to resources.\\

In this document, we propose good practices to provide efficient citation, interconnections with related resources, including IVOA resources.




%DOIs are part of the scientific article publication process. The DOI is a sustainable identifier applied to a web resource that emerges today among other identifiers such  as the ORCID\footnote{\url{https://orcid.org/}}, for authors, the RoR\footnote{\url{https://ror.org/}} for organization or the RAID\footnote{\url{https://raid.org/}} for projects.
%
%As it is unique, it enables a resource to be reliably identified, regardless of the professional network in which it is published. It improves traceability and citation with standard metadata that can be harvested and reused. For instance, BibTeX can be extracted from DOI. The DOI information may also includes references and related products that build up a graph of linked resources step by step.
%
%DOIs are widely used for data, and although their metadata is slightly different from articles, they work very well together.
%
%Data Centers motivated for citation and interconnection, must curate relevant metadata. 
%In this document, we will develop good practices to provide well citation, interconnections with related resources, including IVOA resources.


\subsection{Use case}

\begin{enumerate}
	\item \textbf{Citation}. Data producers (authors) and providers (data centers) expect that the datasets or collections they are publishing are  cited in scholarly communication (journal articles, proceedings, posters, etc.) so that their contribution to the field is acknowledged and attributed. Using the regular citation method allows to treat data and article references equally and use the same tools to count citation and measure impact. Hance data producers and providers are expecting that data reuse is acknowledged through regular citation. 	
	%redo (Edwin)
	Users also expect the Data Center website to provide a way to cite the resource.
	
	\item \textbf{Reuse}. The Data consumer expects to get information about origin and rights. For access rights, existing licence must be displayed but also readable by software.
	
	\item \textbf{Findability}. Data published are disseminated in networks like the VO registry, google dataset search\footnote{\url{https://datasetsearch.research.google.com/}} or the EOSC EU node (see \ref{sec:bestpractice:providing}). The users as well as the Data Center expect that the entries are consistent.
	
	\item \textbf{Impact}. Data centers as well as authors need reports about the usage activity of their work. They query dedicated services (eg: OpenCitation) that make reports and are capable to graph the citation of a specific resources..
	
	\item \textbf{Reproducibility}. A user expects sustainable access to a resource that he cited in an article or that he used in an experiment. He or she expects that the experiment is reproducible. If it uses a service or a knowledgebase (see \ref{sec:intro:kdbs}), he or she expects that the protocols stay compatible with the original implementation. For datasets, he or she should expect that data present in the original study have not been altered.
	
\end{enumerate}

%\begin{enumerate}
%	\item Authors and Data Centers expect that the resources they created or provide will be included in the citations of each article or resources which used them. It needs well curated BibTeX, linking the Data. 
%	%redo (Edwin)
%	\hl{Users also expect the Data Center website to provide a way to cite the resource.}
%	
%	\item The Data consumer expects to get information about origin and rights. For access rights, existing license must be visible but also readable by software.
%	
%	\item Data published are disseminated in networks like the VO registry, DatasetSearch or the EOSC EU node (see \ref{sec:bestpractice:providing}). The users as well as the Data Center expect that the entries are consistent.
%	
%	\item The Data Center as well as authors needs reports about the usage activity of their work. They query dedicated services (eg: OpenCitation) that make reports and are capable to graph the citation of a specific resource.
%	
%	\item 
%	\hl{A user expects sustainable access to a resource that he cited in an article or that he used in an experience.}
%	It expects that the experience is reproducible. If it uses a service or Knowledgebase, it expects that the protocols stay compatible with the original implementation. For Dataset, it could expect that data have not been altered. 
%	
%	%%reproducibility (not possible with evolving dataset, eneous with service,hors-contexte pour KD)
%\end{enumerate}

\subsection{Example of existing DOI}

Table \ref{tab:astroDOIs1} lists a short selection of DOI covering different usage.



\begin{table}[th]
\begin{tabular}{lclcr}
\sptablerule
\textbf{Archive} & \textbf{Prefix} & \textbf{DataCite Client} & Yo & \textbf{Count}\\
\sptablerule
Canadian Astronomy Data Centre        & 10.11570 & nrc.cadc        & - &    104 \\
Chandra Data Archive                  & 10.25574 & si.cda          & - & 57,724 \\
ESO Science Archive Facility          & 10.18727 & tib.esolib      & - &    447 \\
European Space Agency                 & 10.5270  &                 & - & 28,858   \\%TODO, crossref?
IPAC (26131 --- 26135)                & 10.2613X & caltech.ipacdoi & - &    680 \\%617+8+44+5+6
Mikulski Archive for Space Telescopes & 10.17909 & stsci.mast      & - &  3,034 \\
NASA Planetary Data System            & 10.17189 & nasapds.nasapds & - &  2,287 \\
++Small Bodies Node of PDS            & 10.26007 & sbn.archive     & - &  4,837   \\%242 ?
Strasbourg Astronomical Data Center   & 10.26093 & inist.cds       & - & 22,181 \\
\sptablerule
\end{tabular}%
\caption{\label{tab:astroDOIs1} Example of organizations generating DOIs (statistics generated 2025/03/28).}
\end{table}

\todo{TODO: Please, add ObsParis !}


\begin{admonition}{Note}
Dataset DOIs do not lead to data, or what they do lead to is widely varied.
\end{admonition}


%-------------------------------------------------------------------------------------------
\section{Role within the VO Architecture}


\subsection{Status of DOI in the Virtual Observatory}
The IVOA registry uses IVOA identifiers (IVOID) \citep{note:ivoid} which are only usable within the IVOA registry ecosystem. At the time of writing, DOIs are not fully integrated in VO standards. They can be used in the IVOA  Registry since VOResource 1.2 \citep{std:registry} for any ResourceName such as  alternate identifier or related resources. They are also used in the DataOrigin Note \citep{note:dataorigin} as metadata that a service can provide in the result of a query and in the BibVO note \citep{note:bibvo} which is an architecture based on registry to link Data and articles.




\subsection{Comparison with the VO Registry schemas}

\paragraph{The IVOID} is a unique identifier for resource (dataset or service) indexed in the Virtual Observatory registry. 
Registry records has metadata which includes entry points to access the resource via WEB services. The access information needs a machine interpretation and its usage is generally hidden for users.
The IVOID and the IVOA Registry are meant to ensure findability and technical interoperability (how do I find a service and what protocol can I use?). They are mostly used for services. When they represent datasets, the services to access the data are described in details. For instance the vocabulary of the registry extends the relations with a term "isServedBy" to link Data and Service. The absence of an equivalent term in DataCite makes it illusory to try and transcribe the same level of interoperability in DOI.

\paragraph{The DOI} and their metadata  are persistent identifiers for resources. The DOI is visible for users and it handles a landing page human-readable. The metadata include attribution, references, relations, licence, but nothing about programmatic access or interoperability.

%In this sense, the IVOID differs from the DOI, which is visible to the user and which has a URL resolver that does not require a machine interpretation.}

%\hl{In some cases, the IVOID is extended to specify a sub-part of the resource.} For instance, an IVOID of a tableset can be completed to specify a particular record and then to be used to generate a Datalink.

 
% The VO Registry is  based on VODataService and VOResource. It includes Resources; Datasets and Services that can be linked with term \vorent{IsServedBy}. 
 
% This relation allows to provide a strong interoperability in the Virtual Observatory. The absence of an equivalent term in DataCite makes it illusory to try and transcribe the same level of interoperability in DOI.\\
 
 
% \todo{see term like isSourceOf, isCompiledBy that could be used to linkk a service/organization}
 
We propose in section \ref{sec:altidentifier} a method to facilitate link between DOI and registry record.\\

 
VO Registry and DataCite schemas are based on DublinCore terms extended with their own specifications. Despite a common basis, the vocabularies differ. The DataOrigin note provides in Appendix a mapping between DataCite and VOResource for a sub selection of terms. Note that the endorsement process of DataOrigin has not been initiated.
 
 
%-------------------------------------------------------------------------------------------
\section{Extant use of Digital Object Identiﬁers in Archives}


\label{sec:usage}
We observe four different uses for DOIs in astronomy-related archives. Identifiers are being assigned for individual datasets (at various levels of granularity); for collections of datasets; for services; and for what we will call "knowledgebases" or curated meta-collections of data and calculated results. These uses are described in more detail below.


\subsection{Datasets}
\label{sec:intro:datasets}
Dataset DOIs are the most common usage in astronomy-related repositories, and represent about >>XX\% of all such DOIs. Individual datasets are being assigned DOIs at various levels of granularity. At the most granular level, every observation \footnote{\url{https://cxc.cfa.harvard.edu/csc/organization.html}} in the Chandra Data Archive (CDA) is assigned an individual DOI.
Similarly, the European Space Agency assigned DOIs to every individual Herschel, ISO, Planck and XMM-Newton observation. This list also includes every Hubble Space Telescope (HST) observation, which are also archived at the Mikulski Archive for Space Telescopes (MAST) but are not assigned DOIs individually by MAST. 
Individual dataset DOIs are implemented mostly consistent with the usage of DOIs by institutional repositories, generalist repositories (e.g., Zenodo), etc. \todo{move landingpage into the landingpage section} That is, the dataset DOI resolves to a landing page (see \ref{sec:landingpage}) describing the dataset. In some cases the landing pages are rich summaries of the dataset, often including much more information than could be gleaned from the DOI metadata alone. In other cases the landing pages pop the user into a web user interface with very little (or almost no) contextual information about the DOI. 


Dataset DOIs are also being minted for "High-Level Science Products" (HLSP)\todo{TODO: Please add an HLSP example}. Such HLSP datasets are not static and can grow over time, accumulating both data revisions and additions. HLSP landing pages\todo{move landingpage into the landingpage section} for DOIs have no set structure or content and change regularly as the linked data evolve.
None of these dataset DOIs are versioned. The data discovered by following a dataset DOI to an individual observation will change based upon the version of the archive pipeline used to create it, up real-time or on-demand reprocessing for some archives (see also \ref{sec:evolving}).\\

The typical Resource type in DataCite is DataCite:dataset


\textbf{\color{red}TODO: (see also) explain difference between  knowledgebase and evolving dataset.}

\textbf{\color{red}Question: what is the difference between knowledgebases and  HLSP ?}


\subsection{Collections}
\label{sec:intro:collections}
\todo{TO REVIEW!}

Collection-type DOIs direct users to a collection of individual data records in a particular archive.
Examples of collection-type DOIs include the DOI services provided by the Mikulski Archive for Space Telescopes (MAST)\footnote{\url{https://archive.stsci.edu}} \citep{2018ApJS..236...20N}, Chandra Data Archive (CDA) \citep{2018ApJS..236...20N}, and the VAMDC Consortium\footnote{\url{https://vamdc.org}} Query Store service \citep{2018Galax...6..105M}.  
There is significant variation in the expected use cases for these Collection DOIs. 
There are also strong variations in the metadata of Collection-type DOIs.


Considering use-cases, both MAST and Chandra Collection DOIs collect dataset identifiers within their respective databases.
In both cases there is no expectation that these Collection DOIs would ever themselves collect attribution (i.e., be cited in the reference list of a corresponding Journal article).
However, VAMDC Collection DOIs, are intended to collect and distribute credit to the collection of database identifiers they contain.
They attempt to distribute this citation/credit to the collection of resources by "citing" all the related resources in the saved VAMDC query record.
Because this depends upon the capabilities of both the chosen DOI minting service (Zenodo) and the DataCite Schema, additional notes on the details and the outcomes of this effort is provided in one of our case studies in Appendix B. 

Similarly the metadata of Collection DOIs vary between MAST and CDA examples. 
As described in \citet{2023ChNew..34....5D}, Chandra Data Collection DOIs create complete records of individual using \texttt{relatedIdentifier} tags and predicates. 
The metadata of MAST Collection DOIs do not provide detailed information on the individual MAST records collated in the collection.



See \ref{sec:citation}, \ref{sec:landingpage}, \ref{sec:linkeddata}, \ref{sec:resourcetype}, \ref{sec:authors}, \ref{sec:dates}

The typical Resource type in DataCite is \dataciteterm{Collection}\\


\textbf{\color{red}Alternative text (remove VAMDC and the citation part which will be in section 4.2.3)}\\

\textbf{\color{red}Collection-type DOIs direct users to a collection of individual data records that are related to each other (e.g. : individual observations from the same survey or archive, etc.). The collection provides access to resources (identified with a DOI or with another identifier) via relationships defined in the DataCite schema.}

\textbf{\color{red}Examples of collection-type DOIs include the DOI services provided by the Mikulski Archive for Space Telescopes (MAST) \footnote{\url{https://archive.stsci.edu}} \citep{2018ApJS..236...20N}, Chandra Data Archive (CDA) \citep{2018EPJWC.18612011R}. There is significant variation in the expected use cases for these Collection DOIs. There are also strong variations in the metadata of Collection-type DOIs.}

\textbf{\color{red}Considering use-cases, both MAST and Chandra Collection DOIs collect dataset identifiers within their respective databases. For instance, Chandra Collection DOI is made of DOIs of different types. Its metadata and related identifiers are defined to make a Chandra collection DOI the most versatile and general aggregation that can be obtained using Chandra data "entities". }

\textbf{\color{red}Similarly the metadata of Collection DOIs vary between MAST and CDA examples. As described in \citet{2023ChNew..34....5D}, Chandra Data Collection DOIs create complete records of individuals using \texttt{relatedIdentifier} tags and predicates. The metadata of MAST Collection DOIs do not provide detailed information on the individual MAST records collated in the collection.}\\


\textbf{\color{red}
(TODO: add MASER example (Baptiste example)
The collection https://doi.org/10.25935/1SXH-AQ56 is a grouping of https://doi.org/10.25935/2F8G-C505, https://doi.org/10.25935/XS9J-ND90, https://doi.org/10.25935/F8NS-0911, https://doi.org/10.25935/5JFX-DH49, https://doi.org/10.25935/9ZAB-FP47, https://doi.org/10.25935/ZKXB-6C84,
https://doi.org/10.25935/6D16-BM97 and https://doi.org/10.25935/B9NF-9558.
)}


\subsection{Services}
\label{sec:intro:services}

Examples of DOIs for services include IRSA (DUST). Service DOIs lead to query tools. They may lead to query results. 
Sometimes Collection DOIs act like Service DOIs but they are not. Collection DOIs may result from queries performed at a Service.\\

Examples:
    \begin{itemize}
    	\item the VizieR Service, doi:\\ \url{https://api.datacite.org/dois/application/vnd.datacite.datacite+xml/10.26093/cds/vizier}
    	\item TOSS (Tübingen Oscillator Strengths Service, GAVO):\\ \url{https://api.datacite.org/dois/application/vnd.datacite.datacite+xml/10.21938/3I01ISNUCODNH1ZJBCVUWA}
    \end{itemize}


See \ref{sec:landingpage}, \ref{sec:linkeddata}, \ref{sec:resourcetype}, \ref{sec:authors}, \ref{sec:dates}


The typical Resource type in DataCite is \dataciteterm{Service}

\subsection{Knowledgebases}
\label{sec:intro:kdbs}

A knowledgebase is a collection of material collated from many discrete sources. All of the values contained in a knowledgebase have a provenance traced to other resources and have been curated into a single database for reuse. 
Examples include: Simbad \citep[as originally described in, ][]{2000A&AS..143....9W}, NASA Exoplanet Archive (NEA) \citep{NEA12-doi2bib} \citep[as originally described in,][]{2013PASP..125..989A}, NASA Extragalactic Database (NED) \citep{NED1-doi2bib} \citep[as originally described in,][]{1991ASSL..171...89H}. 

Current observations about DOIs for knowledgebases include:

\begin{itemize}
	\item DOIs for knowledgebases lead users to interstitial landing pages rather than directly to the collated, curated resources.
	\item DOIs for knowledgebases do not lead to individual values, e.g., the results of a query against that knowledgebase.
	\item DOIs for knowledgebases never provide information in their\textit{metadata} about the \textit{state} of a knowledgebase: its current version; last update; etc. Nor is this information on the interstitial landing pages of knowledgebases.
	\item Services that return DOIs for queries against knowledgebase are considered Service DOIs (See Section \ref{sec:intro:services}).
\end{itemize}



See \ref{sec:landingpage}, \ref{sec:evolving}, \ref{sec:resourcetype}, \ref{sec:authors}, \ref{sec:dates}

The typical Resource type in DataCite is \dataciteterm{Dataset} or \dataciteterm{Service}

\subsection{Issues}
\label{sec:use:patho}

The primary issue evident in DOI creation today is a mismatch between the metadata created by an archive and the use case (intended to be) implemented by that DOI. Succinctly, the metadata supplied by astronomy archives is often insufficient to ensure the accurate citation of the datasets. 

By detailing these pathologies and triaging their less-than-desirable outcomes we can aim to develop empirically-defined best practices to guide repositories forward with the use of identifiers. Here is a topical list of pathologies:


\begin{enumerate}
	\item Incomplete metadata: missing or incorrectly formatted author data, generic or misstated titles, misunderstood dates.
	\item Inconsistent metadata: transmutations of metadata between systems lead to inconsistent metadata deposits. Example: transformation from schema.org to Crossref left ESA DOIs in a nasty state;
	\item (Un)versioned data: versioning is mostly nonexistent and when provided it is ill defined and often opaquely transmitted;
	\item Misconceptions: DOIs do not lead to data, or what they do lead to is widely varied.
\end{enumerate}



%-------------------------------------------------------------------------------------------
\section{Best Practices for DOI Workﬂows}


\subsection{Pre-requisite}
Ten Registration agencies are providing DOIs, Crossref\footnote{https://www.crossref.org/} usually used for articles and DataCite\footnote{https://datacite.org/} for data are the best known. We strongly recommend the use of DataCite which offers the most appropriate metadata for recording data.\\

To create a DOI (DataCite), you must be a member of DataCite. Data publishers who are not members must contact a member organisation (in general, countries and universities have a contact point).



\subsubsection{Providing metadata using the appropriate schema}
\label{sec:bestpractice:providing}
DOI workflow requires metadata curation based on the DataCite schema\footnote{\url{https://datacite-metadata-schema.readthedocs.io/}} which allows to improve the FAIRness of the datasets. Other workflows exist with their own semantic and metadata serialization. These are multiple, they overlap and are also specific.

For instance, the IVOA framework provides a registry with a high level of interoperability and point directly to the resources, whereas DataCite is specialized in data citation and link a human web page called "landing page".


\important{
DOI implies to maintain a sustainable mechanism to provide a URL. 
This requirement, even if also in usage in the IVOA registry, is mandatory for DOI.
}

Datasets distributed in diverse frameworks complement each other and are likely harvested by platforms or search engine such as ADS, EOSC, Google Dataset. 
These indexing services group together the information relating to the same resource, they merge the metadata which are both redundant and specific to each harvested network. This cross operation process (for instance OpenAire) is often a black box and depends on the indexing service’s strategy. % ask by Edwin
Note that DOI, as a unique identifier, facilitates the cross operations.



The list of metadata tends to increase, but the most popular are DataCite schema, Dublin Core\footnote{\url{https://www.dublincore.org/}}, VOResource \footnote{\url{https://ivoa.net/documents/VOResource/}} (the registry of the Virtual Observatory), schema.org \footnote{\url{https://schema.org/}} (extends Dublin Core and is used by Google), DCAT\footnote{\url{https://www.w3.org/TR/vocab-dcat-3/}} (linked catalogues, datasets and services. DCAT is a concurrent of the VO registry), OpenCitation\footnote{\url{https://opencitations.net/}} (a schema of linked citation),  etc.

\important{
All are specific, and we highlight the importance for Data providers to disseminate consistent metadata 
(for instance list the whole authors in all output).
}

The importance, but also the specifity of the metadata have been discussed in IVOA DCP session (see the presention of H.Enke, Interop 2023, Bologna \footnote{\url{https://wiki.ivoa.net/internal/IVOA/InterOpMay2023RegistryDCP/DOI-AIP-20230510.pdf}}
). In practice, it is better for implementers to think since the beginning about the different output in order to provide consistent workflow.\\

\paragraph{Note} DataCite provides several serialization of the metadata, in particular "schema.org".

\important{
Maintain the disseminations workflows togethers
}


\subsubsection{DOI syntax}
The DOI architecture includes a URL resolver to link the DOI identifier and the resource for the long term. Only the DOI identifier is fixed, the URL as well as the metadata are maintained by the DOI creator.\\

The DOI syntax is composed with a prefix followed by a suffix.
The prefix is assigned by DataCite or Crossref and is used for all resources provided by the DOI producer. The suffix is created by the producer to identify the resource.

For instance: 

\url{https://doi.org/10.3847/1538-4365/aab76a}

\begin{itemize}
	\item the prefix 10.3847 is the prefix attributed by Crossref to the AAS journals 
	\item the suffix 1538-4365/aab76a defined the article 
\end{itemize}

DataCite recommends using an opaque syntax. To remove any significance in a name avoids bad interpretation and is more sustainable. For example, the data center where the data are deposited may change and therefore should not be used in the syntax.

Note also the DOI usage in web pages for which it is recommended to provide clickable links. It is therefore up to the web maintainer whether or not to hide the DOI with appropriate text


%-------------------------------------------------------------------------------------------
\subsection{Citation requirements}
\label{sec:citation}

\important{
	Semantic forewords.
	Citation means citation in the reference list of an article. A citation is not a footnote URL, an acknowledgement or any DOI string in the text. It ONLY refers to listing the reference in a reference list of an article.
}

\subsubsection{Generating BibTeX}
DataCite schema includes the required metadata to generate citation in various formats: BibTeX, APA, etc. The citation quality is generally fixed by journals, ADS or Data publishers. It is possible to make a citation from DOI metadata when these are properly curated (BibTeX generated by ADS is richer than those provided by DataCite). 
We will describe the mandatory items that cover the known citations and we will complete the metadata with added relevant information.\\

Note: Example of citation provided by DataCite in BibTeX format:

\begin{verbatim}
curl -LH "Accept: application/x-bibtex" https://doi.org/10.5270/esa-1ugzkg7
\end{verbatim}


\paragraph{Full BibTeX template} : the following example maps BibTeX with DataCite schema (see table \ref{tab:tex}).

We use the ADS BibTex type "@dataset". This term is specific to ADS and is not used by service such as DataCite which uses the generic term "@misc". % moved+change from Edwin ask

\begin{lstlisting}
	@dataset{{localref},
		author = {authors},
		title = "{title}",
		year = {year},
		month = {month},
		eid = {usualName},
		url = {url},
		keywords = {keywords},
		publisher = {publisherName},
		copyright = {rights},
		DOI = {DOI}
	}
\end{lstlisting}

%Note that BibTeX standard doesn't provide a specific term for dataset. 
%"@dataset" is an add-on proposed in this note which is more precise than "@misc".\\ % moved

\begin{table}[th]
	\begin{tabular}{lll}
		\sptablerule
		\textbf{BibTeX} & \textbf{DataCite} & \textbf{Relevance for citation} \\
		\sptablerule
		\sptablerule
	authors & Authors & MUST, see \ref{sec:authors} \\
	title & Title & MUST, see \ref{sec:title}\\
	year &  Date:creation & MUST, see \ref{sec:dates} \\
	month & Date: creation & \\
	eid & alternateIdentifier & MAY, see \ref{sec:linkeddata}\\
	url & & SHOULD, use \url{https://doi.org/{DOI}} \\
	keywords & Sujects & SHOULD, Please, see \ref{sec:keywords} \\
	publisher & Publisher & MUST \\
    copyright & Rights & RECOMMENDED, see \ref{sec:licenses} \\
    DOI & & MUST \\
    resource\_type  & resourceType & MUST, see \ref{sec:resourcetype}\\
    \sptablerule
	\end{tabular}%
\caption{\label{tab:tex}linking BibTeX and DataCite schema}
\end{table}

Citation in APA style:
\begin{verbatim}
{authors} ({year}). {title} [resource_type]. {publisher}. {DOI}
\end{verbatim}

VizieR example: (catalogue J/MNRAS/320/451)
\begin{verbatim}
Beers, T. C., Rossi, S., O'Donoghue, D., Kilkenny, D., Stobie, R. S.,
Koen, C., & Wilhelm, R. (2006). A-G star metallicity [Data set]. 
Centre de Donnees Strasbourg (CDS). https://doi.org/10.26093/CDS/VIZIER.73200451
\end{verbatim}

\subsubsection{Evolving datasets}
\todo{PLEASE REVIEW!}

See DataCite evolving dataset guidance\footnote{\url{https://datacite-metadata-schema.readthedocs.io/en/4.6/guidance/dynamic-datasets/}}\\

\textbf{\color{red}TODO: recall the difference between knowledgebase and Evolving}

We consider different citation for evolving datasets. The method depends on the Data Center implementation.

\begin{enumerate}
  \item Cite a snapshot of the Dataset. In this approach, the Data Center makes snapshots and adopts a DOI versioning mechanism (see \ref{sec:version}).
  \item  Cite the dataset as to be an evolving Dataset.
         Example in APA style:
\begin{verbatim}
{authors} ({year}). {title} [evolving Data set]. {publisher}.
{DOI}. Accessed {date_of_access}
\end{verbatim}

		In the example {date\_of\_access} could be the 'update' date of the DOI record (assuming that the dataset and its DOI are well synchronized).

	\item Cite a DataSet extraction resulting of a query.\\ 
	The solution may become complex if we take or not the reproducibility aspect.
	A simple solution without reproducibility constraint consists to cite the access protocol (for example IVOA SCS, TAP), optionally completed with query details.

	Example in APA style: (note that "protocol" is independent of the DOI record!
\begin{verbatim}
{authors} ({year}). {title} [evolving Data set]. {publisher}. 
{DOI}. Accesses {date_of_access}, via {protocol}	
\end{verbatim}

\todo{May be add a reference to the RDA term "Dynamic" ?}

	An option taking into account the reproducibility has been adopted by the VAMDC Query Store\footnote{\url{https://cite.vamdc.eu/}} where query and result are hosted with a DOI (giving details are not in the scope of this note).
\end{enumerate}

\paragraph{Note} see also the acknowledgment proposed in DataOrigin\footnote{\url{https://www.ivoa.net/documents/DataOrigin/}} Appendix Citation, Template.

\subsubsection{Collections}
\todo{PLEASE REVIEW!}

Collections improve discoverability thanks to relationships linking individual resources and allow global metadata factoring. However, the usage of Collection for citation is ambiguous.

Practice shows that the quality required to extract a good citation is often not obtained from the DOI of Collections. This lack of information is often due to the concept which is of a different nature.

There are different views that depend on the Data Center strategy but which could be ambiguous for article editions.
We report two usages, without wanting to endorse either. 

\begin{itemize}
	\item Collection is not intended to be cited in articles.
The role of Collection (potentially having poor metadata) seems to be essentially to establish relation (with the advantage of the flexibility of the URL resolution that the DOI offers).
This approach is chosen by MAST


	\item The preferred citation is the Collection.
Collections are intended to collect and distribute credit to and collection of entities they contain.
Sometimes, individual entities have poor metadata in favor of global metadata (in Collections). In this architecture, because heritage is not trivial for harvesting, it results that individual resources have no metadata allowing citation.
This approach is chosen by Chandra
\end{itemize}

\subsubsection{Service}
We encourage Data publishers to provide a way to cite or acknowledge services used by authors in articles. The recommendation is in the Publisher discretion and should be visible in the landing page of the Service (see \ref{sec:landingpage}).\\

It is rather a common practice to acknowledge than cite a service in an article. For both, the Service DOI which includes the URL resolver has to be considered.

\subsection{Landing pages}
\label{sec:landingpage}

\subsubsection{Building a landing-page}
Landing page is a human readable WEB page attached to the DOI. Datacite provides a documentation about good usage
 \footnote{\url{https://support.datacite.org/docs/landing-pages}}.

\important{
	The landing page is primarily dedicated for Human. 
	The DOI metadata should be visible in the web page. In particular, 
	the DOI, title, authors, licenses should be highlighted.
}


Additional information is often added. In particular links to access the data, but also any other information, specific to the data center or included in other workflows provided by the Data Center (BibTeX, schema.org \footnote{\url{https://schema.org/}}, DCAT \footnote{\url{https://www.w3.org/TR/vocab-dcat-3/}}, etc)

\paragraph{Landing page for service of Knowledgebase}
The landing page of a service or a Knowledgebase is generally its web portal. It includes both service access and information (eg: contact, about, etc.)

\paragraph{Landing page for collection}
This page contains information that is common to every datasets in the collection. Each Dataset specificity is not shown on this page. The content depends on the nature of the collection: for instance the Organization, an abstract, the date of creation or the materials used to generate the individual datasets.

The page should provide the way to access individual datasets.

\subsubsection{Generate a machine-readable landing page}
Search engines harvest landing page for indexation and expect some metadata serialized with a standard semantic. For instance "schema.org" or DCAT serialized in JSON-LD are needed by Google Datasets \footnote{\url{https://datasetsearch.research.google.com/}}.\\


The FAIRness of the landing page can be evaluated with validators:
\begin{itemize}
    \item FAIRchecker \footnote{\url{https://fair-checker.france-bioinformatique.fr/}}
    \item Google Search central \footnote{\url{https://developers.google.com/search/docs/appearance/structured-data}}
\end{itemize}


\subsubsection{Pathologies}


\begin{itemize}
	\item https://doi.org/10.17189/1519607 (NASA/PDS): there is a title, authors, DOI, summary... but there is no direct link to the data. The "Search/Access Data" link goes to a search interface, where the user should search again with some parameter (not specified, to be guessed)
	\item https://doi.org/10.48322/rgf7-3h67 (HPDE): there is everything about the citation, title, doi, summary, content... but the formatting is very close to the SPASE XML record. It’s ok for user fluent with SPASE, not so much for outsiders. The SPASE record lists a number of related identifiers, not present in the DataCite metadata.
	\item https://doi.org/10.57780/esa-3xcjd4w (ESA): All required/recommended information is present, but the granularity (a single DOI for the full experience, not split with version ro processing levels...). And the data access goes to a search interface, where the user should search again for the products.
	\item https://doi.org/10.3334/ornldaac/2351. Besides having semantic information in the DOI, the biggest problem is the fact that metadata says that this is a collection DOI. However, the metadata is for a dataset that is in the collection. The collection itself is specified in the relatedIdentifiers section with attribute IsPartOf, but the collection itself does not have a DOI.
\end{itemize}


\subsection{Linked Data}
\label{sec:linkeddata}


\subsubsection{Connect resources together}
Linked Data allows to connect resources together, it helps discovery and allows to generate a map of interconnected resources. 
Linked Data are expressed with \dataciteterm{RelatedIdentifier} in DataCite schema. They have been the subject of a supplementary section in the DataCite guidance.\\

We recommend to add at least one relation (for instance to link a dataset with a reference article).\\

DataCite provides a list of controlled vocabulary that allows to specify the relationship between resources. 
These relations may use DOI or any other sustainable identifier (eg: bibcode).


\important{	
The relationship vocabulary is precise. 
Too often, providers give their own interpretation of the terms. 
If there’s any doubt about the meaning of the vocabulary, 
it’s better to put no relations than a misunderstood relationship.
}

See relation vocabulary and their definitions in the DataCite Schema\footnote{\url{https://datacite-metadata-schema.readthedocs.io/_/downloads/en/4.5/pdf/}, section 12}.


%\begin{bigdescription}
%	\item \color{ivoacolor}\textbf{Note}
\important{Privilege DOI linking to any relations}
%\end{bigdescription}

DOI has to be privileged than any other identifier or URI. DOI facilitates the harvesting/merging jobs. For instance the EOSC EU Node portal displays related resources having DOI.



\subsubsection{Link resources within a DataCenter}
DataCenter may provide resources in different granularity. For instance Chandra provides catalogues of observations. Each observation is a Product having his own DOI. 
Then the products are linked to the catalogue which has a DOI too.

\paragraph{Particular interest for Collections}
In the case of Collection, DataCite provides terms to link a resource to its collection.
\dataciteterm{isPartOf} seems to be appropriate to link an individual Dataset to a Collection. The \dataciteterm{relatedIdentifiers} picked to express the relationship between elements of a collection and the collection are defined by the relationship in the hierarchy of the data holdings.

Include related identifiers linking the collection DOI to internal and if possible external identifiers for the dataset(s). 
This will make the DOIs broadly more useful and interoperable.


\subsubsection{Link data to external resources}
There are many reasons to link a resource with external products, we give just few examples:

\begin{itemize}
	\item link the datasets that have been used to create a product 
	\item link other copy 
	\item for a derived product, link the original data
	\item cite a resource
	\item etc.
\end{itemize}

DataCite schema allows to qualify the relation. Although these qualifications are precise and must not be subjected to bad interpretation. We list a short list of terms often used for this purpose (Note that DataCite relationships have no scope restriction, they can be applied to link external or internal archives.)

\begin{itemize}
	\item \dataciteterm{isIdenticalTo} (exact copy), 
	\item \dataciteterm{isVariantFormOf}, \dataciteterm{isDerivedFrom}
	\item \dataciteterm{Cite}
	\item etc.	
\end{itemize}


\paragraph{Linking Dataset to a publication}
DataCites provides terms to link Datasets with articles. For instance \dataciteterm{Cites}, \dataciteterm{isSupplementTo}, \dataciteterm{isDescriebdedBy}, \dataciteterm{References}, etc.
Choosing the good term is specific to the Datasets. \\


Note the \dataciteterm{Cites} relations which makes an automated citation (the article is cited when the DOI of the dataset is created). 
Other terms like \dataciteterm{References} generates statistics in DataCite too.


Citation between Articles and dataset is possible in either direction (term \dataciteterm{Cites} or \dataciteterm{isCitedBy}). The choice of citation depends on the workflow. Sometimes the article may cite a dataset that has been published previously. At other times, the dataset is published in conjunction with the article or has been reproduced in its identical form or with added value at a later date. It should be noted, however, that the notion of \dataciteterm{isCitedBy} requires a workflow synchronization that is not always easy to implement.

%\paragraph{Query DataCite statistics}, see "referenceCount", "citationCount"
%\begin{verbatim}
%curl "https://api.datacite.org/dois/{DOI}"	
%\end{verbatim}

%\paragraph{Query Crossref statistics}
%\begin{verbatim}
%curl "https://doi.crossref.org/search/doi?doi={DOI}&format=info&pid=mail@address	
%\end{verbatim}


\paragraph{Example:} link a dataset with its reference article.\\
The above example provides a relations using bibcode \\
(extract from \url{https://doi.org/10.26093/cds/vizier.22640008}).

\begin{lstlisting}%[language=json]
	
"relatedIdentifiers": [
  {
    "relationType": "IsSupplementTo",
    "relatedIdentifier": "2023ApJS..264....8H",
    "relatedIdentifierType": "bibcode"
  }
]
\end{lstlisting}

\paragraph{Linking Dataset with its original resource}
We distinguish a mirror copy and a resource derived from an original resource. 
Both can have their own DOI. We encourage derived resources as well as copy mirrors to link the original resource using DataCite relations. 

There are lots of reasons why a DataCenter that provides a derived resource wants to provide a DOI.
Often, the derived product is the result of a curation that provides added values.

Before creating a DOI, we encourage the DataCenter to tell their DOI plan to the original archive. 
Some metadata of the original resources should be copied in the derived product, and others will be dedicated to the derived product.

\begin{itemize}
\item Authors: the full authors (creators and contributors) list should be replicated in the derived metadata. The list can be completed with contributors involved in the derived product curation.
\item Dates: the creation and the modification dates are the dates of the DataCenter that provide the derived product.
\item Abstract: it is not needed to duplicate the original abstract, but the added curation should be explained.
\item relations: add a link to the original product. 
You can Cite (relation type \dataciteterm{Cites}) the original resource that you can complete with a relation explaining the relationship between the original and the derived product.
\end{itemize}

Please : refer to \dataciteterm{relationType} vocabulary and do not extrapolate the semantic.


\paragraph{Example:}
\begin{lstlisting}%[language=json]
	
"relatedIdentifiers": [
  {
    "relationType": "IsVariantFormOf",
    "relatedIdentifier": "10.5270/esa-qa4lep3",
    "relatedIdentifierType": "DOI"
  },
  {
    "relationType": "Cites",
    "relatedIdentifier": "10.5270/esa-qa4lep3",
    "relatedIdentifierType": "DOI"
  }
]
\end{lstlisting}

\subsubsection{Link other networks}
\label{sec:altidentifier}
Link an other network (see \ref{sec:bestpractice:providing}) is not a capability provided by DataCite.
However, networks using a specific identifier can be exploited to link the DOI record.\\
\dataciteterm{alternateIdentifier} is a term to specify another identifier of the same resource. For instance the Usual Name used by the Data Center or the IVOID of the Virtual Observatory.

\important{When it exists, we suggest to add the IVOID of the resource in DOI using \dataciteterm{alternateIdentifier} and to add the DOI in the VO Registry records using \vorent{altIdentifier}.}

\paragraph{Example of alternatated identifier using IVOID.}
\begin{lstlisting}%[language=json]
	
"identifiers": [
  {
	"identifier": "ivo://CDS.VizieR/j/mnras/320/451",
	"identifierType": "ivoid"
  }
]
\end{lstlisting}

\subsubsection{Linked Data for Services and knowledgebase}
\label{sec:linkedataServiceKnowledgebase}
It is again the role of the Data Center to choose relevant links. However, we suggest to limit links with a reference article.\\

For Query tool Service (or web Service) we haven’t found any equivalent in DataCite of the \vorent{servedBy} term of the VO registry to link datasets with services. \\

For Organized System Service, then terms like \dataciteterm{isSourceOf}, \dataciteterm{isCompiledBy} can be envisaged.



\subsection{Versioning and evolving datasets}
\label{sec:version}


\subsubsection{Manage version}
Distinguish dataset versioning (the Data Center responsibility) and metadata versioning (automated versioning done by DataCite at each metadata update).

A good practice consists to follow a versioning mechanism for each data update. DataCite (version 4.6) recommends to create a new DOI for each major version and stipulating the version number with \dataciteterm{Version}. 

\todo{Provide example of what a "data update" or "major version ?}

It is recommended to adopt a version number following the pattern:
\begin{verbatim}
	major_version.minor_version[.patch_version]
\end{verbatim}


Different mechanisms exist:
\begin{itemize}
\item  Zenodo \footnote{\url{https://zenodo.org/}} method: makes a DOI collection of versions. Each version has its own DOI which is linked (related identifier) with the DOI collection.
\item Make 1 DOI for version and link the DOI version together using related identifier \dataciteterm{isNewVersionOf}, \dataciteterm{isPreviousVersionOf}
\end{itemize}

\subsubsection{Evolving datasets}
\label{sec:evolving}
Versioning is well adapted for data subject to planned update, such as survey releases. Versioning implying a DOI per version is preferable for reproducibility.
However, there are datasets that evolve regularly and for which versioning is inappropriate. For instance logs of observations evolve regularly.

For those types of datasets, we suggest adding in the DOI \dataciteterm{Title} or in \dataciteterm{Description} the evolving nature of the datasets and to modify the "Update" date at each modification.

We also recommend specifying the evolving nature in the \dataciteterm{ResourceType} (see examples in \ref{sec:resourcetype}).


\subsection{Tombstone page}
\label{sec:tombstone}

In principle, a resource having a DOI should be sustainable (For instance, a DOI in an article links a resource which is relevant for its content).\\

If for any unfortunate reason,  the resource needs to be discontinued, the landing page must be replaced by a "tombstone page". It is the responsibility of the data provider to maintain the URLs of their landing pages through their DOI registration agencies. \\

The tombstone page must include the following pieces of information: 
\begin{itemize}
	\item DOI, title, creators, citation (as for a regular landing page) 
	\item Clear statement that the resource is discontinued 
	\item Reason for the removal of the resource
	\item Link to a new version or other replacing resources  (if applicable)
\end{itemize}


%-------------------------------------------------------------------------------------------
\section{Metadata list}
We focused on a sub list of terms needing a special attention in curation.

\subsection{Choosing a resource type}\label{sec:resourcetype}

The Resource type is specified with  \dataciteterm{ResourceTypeGeneral} which uses a controlled vocabulary, completed with a \dataciteterm{ResourceType} which is a free text.\\

Examples: Choosing the good Resource type leads to the Data publisher. 
The following list is indicative only and does not constitute a rule of good practice:


\begin{table}[th]
\begin{tabular}{lclcr}
	\sptablerule
	 & \textbf{ResourceTypeGeneral} & \textbf{ResourceType}  \\
	\sptablerule
table         & Dataset             & Dataset          \\
spectrum      & Dataset             & Spectrum         \\
image         & Image               & Image            \\
logs of observations & Dataset      & Evolving Dataset \\
Collection    & Collection          & Data files, Documents... \\
Service VO    & Service             & IVOA Service     \\
Service Web   & Service             & Web Service      \\
Service/Project & Service or Project & \\
knowledgebase & Dataset             & Evolving Dataset \\  
\end{tabular}%
\caption{\label{tab:resourcetype}}
\end{table}

Example:

\begin{lstlisting}
	
"types": {
  "resourceType": "evolving Dataset",
  "resourceTypeGeneral": "Dataset"
},
"titles": [
  {
	"lang": "en",
	"title": "The Gemini Observation Log (evolving Dataset)"
  }
]
\end{lstlisting}

\subsection{Authors}\label{sec:authors}
\important{for datasets. The good usage consists of adding all authors and not only the first author.}


All authors are indeed asked by journals for citations. 
We also encourage the author's ORCID with their affiliations. When possible, inform the RoR.\\

Example of a unique author.

\begin{lstlisting}%[language=json]
	
"creators": [
  {
    "name": "Ochsenbein, Francois",
    "nameType": "Personal",
    "givenName": "Francois",
    "familyName": "Ochsenbein",
    "affiliation": [
      {
        "name": "Observatoire astronomique de Strasbourg",
        "schemeUri": "https://ror.org",
        "affiliationIdentifier": "https://ror.org/04xsj2p07",
        "affiliationIdentifierScheme": "ROR"
      }
    ],
    "nameIdentifiers": [
      {
        "schemeUri": "https://orcid.org/",
        "nameIdentifier": "0000-0003-4667-015X",
        "nameIdentifierScheme": "ORCID"
      }
    ]
  }
]
\end{lstlisting}

\paragraph{Creators and contributors}
\todo{PLEASE REVIEW!}
DataCite distinguishes Creators and Contributors. The authors are conceptually the same as the Datacite term Creators.

The \dataciteterm{creator} can be a \dataciteterm{Person} or an \dataciteterm{Organization}.
Contributors are persons or organizations that contributed to the development of the resources (sic DataCite Schema 4.6).
A contributor has a role (eg: Editor, Supervisor, etc.) taken in a controlled vocabulary (see \dataciteterm{contributorType} term and the complete list in DataCite Schema).\\

In a way \dataciteterm{Contributors} is an alternative of \dataciteterm{Creators}. For instance, Zenodo provides a way to add a role to creators in its upload form. However, DOI created by Zeonodo used only Creator's term.

The usage of Contributor in citation has not been evaluated today.


\paragraph{Authors for Collection, Services, Knowledgebases}
Staff implied in this type of resource evolves. We recommend specifying the Organization (and the RoR if it exists) rather than contributors. Adding humans (for instance the main Creator of the service) is in the leaves to the Data publisher discretion.

\subsection{Keywords}
\label{sec:keywords}
We encourage the usage of recognized keywords such as UAT\footnote{\url{https://astrothesaurus.org/}},
IVOA-UAT\footnote{\url{https://www.ivoa.net/documents/uat-as-upstream/}} or any keywords driven with a Web semantic.\\

The term in the DataCite schema is \dataciteterm{subject}.\\

Example:\\
\begin{lstlisting}%[language=json]
	
"subjects": [
  {
    "subject": "Sky surveys",
    "valueUri": "https://astrothesaurus.org/uat/1464",
    "schemeUri": "http://astrothesaurus.org",
    "subjectScheme": "UAT"
  },
  {
    "subject": "Earth (planet)",
    "valueUri": "https://astrothesaurus.org/uat/439",
    "schemeUri": "http://astrothesaurus.org",
    "subjectScheme": "UAT"
  }
]

\end{lstlisting}

\subsection{Dates}
\label{sec:dates}

DataCite provides a list of terms to qualify dates such as \dataciteterm{Created}, \dataciteterm{Updated}, \dataciteterm{Validated}, etc.\\

The dates involve the publication in the data center only. For example, a dataset provided by a Data Center A may have been created months or even years ago and already published in a reference article or another Data Center B. The  \dataciteterm{Creation} date of the resource published by A is the date of creation in A.

\important{Dates have not to be used as versioning.}

\paragraph{Dates for Services, Knowledgebase and Collection}
By nature, these types of resources may evolve. The frequency of updates may make it inappropriate to use the update date. For changes in architecture or data model, versions should be used.


\subsection{Title and description}
\label{sec:title}


\paragraph{Titles} is an important metadata, it describes the resource and is often exploited by search engines (such as ADS or VO-registry) in a text search process.


Assigning a title is specific to each dataset. It is a short sentence that contains the most relevant aspects of the dataset but descriptive enough to be understandable/interpretable by non-experts. This would be in the light of supporting Open Science. For datasets derived or attached to a reference article, it is better to create a new description that describes the dataset.\\


Example : Reference article: ApJ (Draper Z.H, 2000), \footnote{\url{https://doi.org/10.1088/0004-637X/786/2/120}}\\
\textit{"Disk-loss and disk-renewal phases in classical Be stars. II. Contrasting with stable and variable disks"}


Dataset Title : VizieR, \url{https://doi.org/10.26093/cds/vizier.17860120} \\
\textit{"Spectropolarimetric survey of classical Be stars"}\\

Making a good title is of course specific to the dataset. For instance, we can name the object or type studied, the facility used, the release version, or the measurement methods if it is spectroscopy or photometry, etc.


\paragraph{Description} completes the title. 
The ADS would index this as the abstract for the dataset record. Just like the title, ADS hopes this is a descriptive text, understandable for non-experts. Note that, like title, description describes the data and not its reference, even when the data comes from an original resource.


Datacite provides a description qualifier (Abstract, Methods, ...) which depends on the resource.


\paragraph{Description for data derived from external resource}
When the data derived from an external resource is not a simple copy, it is recommended to adapt the original description. For example, in the case of data attached to a published article, rather than reproducing the abstract of the reference article (which may also be subject to the same license as the article), the description may focus on the dataset content with added information such as those useful to produce the datasets.


Another good practice consists of adding in the description a reference to the data origin.\\


Example : VizieR DOI description example -

\textit{"VizieR online Data Catalogue associated with article published in journal Monthly Notices of the Royal Astronomical Society with title ... }

\subsection{Licenses}
\label{sec:licenses}

License is one of the metadata required by FAIR principles\footnote{\url{https://www.go-fair.org/fair-principles/}}

Institutes as well as countries encourage the usage of licenses for the datasets. For instance:

\begin{itemize}
\item NASA encourages CC0 licence (see SPD-41)
\item French government imposes LO/OL or CC-by licenses (see Etalab)
\end{itemize}


\important{Use machine readable licences}

It is highly recommended to use machine-readable licences using the official term or the URL link:

\begin{itemize}
\item SPDX licenses \url{https://spdx.org/licenses/}
\item Creative Common \url{https://creativecommons.org}
\end{itemize}

Datacite metadata (see "Rights" in the DOI metadata schema)

\begin{lstlisting}{language=json}
	
"rightsList": [
  {
    "rights": "Creative Commons Attribution 4.0 International",
    "rightsUri": "https://spdx.org/licenses/CC-BY-4.0.html",
    "schemeUri": "https://spdx.org/licenses/",
    "rightsIdentifier": "CC-BY-4.0",
    "rightsIdentifierScheme": "SPDX"
  }
]
\end{lstlisting}

\subsection{Funding references}

Financial support can be attached to a DOI using \dataciteterm{fundingReferences}.

Funds information is expressed with a reference to the organism, generally using a Crossref Funder ID (OFR, Open Funder Registry)\footnote{\url{https://www.crossref.org/services/funder-registry/}} or a RoR, and an award reference (see DataCite guidance)\\


Example: DOI generated by NASA Planetary Data System:\\
\url{https://api.datacite.org/dois/application/vnd.datacite.datacite+xml/10.26007/97r3-1e19}\\

Example: DOI generated by Chandra:\\
\url{https://api.datacite.org/dois?query=10.25574/29770}


\subsection{Identifier for project}

At the time of writing, RAID (Research Activity Identifier) is new in the open DATA scene. We do not have feedback to provide any best practice. However, an agreement between the RAID maintenance organisation (Australian Research Data Commons\footnote{\url{ Australian Research Data Commons}}) and DataCite makes possible to generate such identifiers from DOIs (using \dataciteterm{resourceTypeGeneral} "Project")


%-------------------------------------------------------------------------------------------
\section{Recommendation checklist}


\begin{enumerate}
	\item Choose adequate granularity. The granularity depends on parameters such as citation, discoverability, traceability. Consider also that DOI need maintenance for the long term  (see \ref{sec:bestpractice:providing})
	\item Select the \textbf{Resource type} and adopt the usage specific to the chosen category (see \ref{sec:resourcetype}).
	\item \textbf{Landing page} (see \ref{sec:landingpage})
	\begin{itemize}
		\item Check if DOI metadata are displayed in the landing page 
		\item Complete the landing page with added information such as links to datasets and any other metadata used in other dissemination workflows
		\item Check if the landing-page is machine-readable
	\end{itemize}
	\item \textbf{Provide curated metadata}, in particular:
	\begin{itemize}
		\item List all authors with ORCID and affiliation when they are known (see \ref{sec:authors})
		\item Add machine readable licence (see \ref{sec:licenses})
		\item Add the publication date in the Data Center (see \ref{sec:dates})
		\item Choose title matching with the Content and the type of the resource (see \ref{sec:title})
	\end{itemize}
	\item Check if \textbf{metadata allows to generate citations} (see \ref{sec:citation}).	
	
	For ADS indexing, it would be desirable to have a description (abstract) and keywords in addition to the BibTex metadata.
	
	\item \textbf{Link your Datasets} with resources (see \ref{sec:linkeddata})
	\begin{itemize}	
		\item Do not misinterpret the meaning of a semantic. The relations semantics are precise, in case of doubt it is better to put nothing. 
		The IVOA DCP working group can also help you\footnote{\url{mailto:datacp@ivoa.net}}
		\item Link the DOI with resources which are used to generate the dataset. For instance datasets attached to an article, or when they come from an original archive.
		\item add Alternate identifiers. In particular add IVOID if it exists (see \ref{sec:altidentifier})
	\end{itemize}
	\item Ensure the maintenance of the DOI\\
	Ensure that all your dissemination workflows are consistent, in particular, with IVOA registry and with "schema.org" (see \ref{sec:bestpractice:providing})
	\item Use a \textbf{versioning mechanism} each time your datasets evolved.\\
	Distinguish dataset versioning (the Data Center responsibility) and metadata versioning (automated versioning done by DataCite at each update) (see \ref{sec:version})
	\item Ensure the sustainability of the landing pages.\\
	If for any unfortunate reason, the datasets is no more available, provide a Tombstone page explaining the reasons (see \ref{sec:tombstone})
\end{enumerate}


\appendix
\section{Catalog of Repositories and Archives issuing DOIs}
\label{sec:catalog}

This is not an update of the \citet{2022ApJS..260....5C} appendix. 
This is meant to also provide additional information about what kinds of DOIs are minted and what types of deposits the archive will accept.

\subsection{Domain Specific repositories}
\textbf{\color{red}  TODO add brief descriptions}\\

\begin{enumerate}
	\item CADC
	\item CDA
	\item China-VO
	\item ESA
	\item ESO
	\item IPAC
	\item MAST
	\item NEA
	\item PDS
\end{enumerate}

\subsection{Generalist repositories}

\begin{enumerate}
	\item Dataverse: Open source research data repository software.\\
	Dataverse includes data management from input to the output, provides DOI, OAI-PMH.
	\item Dryad: Open data publishing platform for authors.
	\item Zenodo: Zenodo is a popular platform for authors. Zenodo uses the DataCite and generates DOI. The curation leads to authors.\\
	Zenodo developed by the CERN provides Invenio (Open Software) which is an alternative to Dataverse 
	\item FAIRsharing \cite{https://doi.org/10.25504/fairsharing.rd6gxr}: A curated, informative and educational resource on data and metadata standards, inter-related to databases and data policies. The Standards and endorsed notes provided by the IVOA have a DOI created by FAIRsharing
\end{enumerate}


%--------------------------------------------------------------------------------------
\section{Important DataCite Metadata Case Studies}
This section describes case studies around the metadata created by three archives. 
These case studies let us break out specific DataCite metadata recommendations and JSON snippets

\subsection{Chandra Data Archive}
The CXC created DOIs for each single Chandra observation, data entities of the Chandra Source at the single observation and stacked observation level, and publication-based, user-requested Chandra Data Collections. CXC mints DOIs with its own DataCite prefix and different DOI names for each of the classes of DOIs created (see below). For each class of Chandra DOIs, a comprehensive set of Chandra-related DataCite metadata are automatically specified and updated upon specific trigger actions; multiple types of DataCite related identifiers are used to connect DOIs of related data entities in the Chandra archive".


See \citep{2023ChNew..34....5D}, \citep{2018EPJWC.18612011R}.

	
\subsection{VAMDC \& Zenodo workflow}
The good and the bad of transitory data citation. See \citep{2018Galax...6..105M}.\\

The VAMDC Consortium is a consortium of Institutes and Research Institutions that share a common technical and political framework for the distribution and curation of atomic and molecular data. VAMDC provides a Query Store including data storage for query result with possible DOI generation based on Zenodo\\

Example:\\
VAMDC query Store record: \url{https://cite.vamdc.eu/references.html?uuid=a819e879-760d-4ede-831a-38d359b5864c}\\
Landing page: \url{https://zenodo.org/records/11243136}

\subsection{ESA}
\textbf{\color{red}  add ESA ?}

Example:\\
Landing page: \url{https://doi.org/10.5270/esa-qa4lep3}\\
(JSON) DOI: \url{https://api.datacite.org/dois/10.5270/esa-qa4lep3}

\subsection{VizieR}
VizieR produces some awesome DataCite metadata.\\


The VizieR catalogue service is a CDS service for data published in journals or by space / base-ground agencies. The data are curated by CDS with added-values such as cross-correlations, links and metadata required for the Virtual Observatory. It is a POST publication data flow that generates DOI, landing page, and which disseminate metadata, especially in the Registry of the Virtual Observatory.\\


Example:\\
Landing page: \url{https://cdsarc.cds.unistra.fr/viz-bin/cat/J/AJ/167/89}\\
IVOA record: \url{https://cds.unistra.fr/registry/?verb=GetRecord&metadataPrefix=ivo_vor&identifier=ivo://cds.vizier/J/AJ/167/89}\\
(JSON) DOI: \url{https://api.datacite.org/dois/10.26093/cds/vizier.51670089}

\subsection{TODO B.5 MASER  (Baptiste?)}
	
\section{Workflows}
\textbf{\color{red} added by Gilles - TODO: discuss the relevance}

Figure \ref{fig:diag-dissemination} represents a simplified view of Data dissemination.
In particular, we see the importance of the IVOA registry harvested by EUDAT\footnote{\url{https://www.eudat.eu/}} and then EOSC\footnote{\url{https://eosc.eu/}} which cross records with DataCite.


Figure \ref{fig:doi-schema} proposes relations ships. This diagram had been proposed in a report feedback of the IVOA (A.Schaaff et al.)

\begin{figure}[!h]
\centering
\includegraphics[width=\textwidth]{diag_dissemination2.eps}
\caption{Dissemination workflow}
\label{fig:diag-dissemination}
\end{figure}

\begin{figure}[!h]
	\centering
	\includegraphics[width=\textwidth]{schema-doi.png}
	\caption{DOI schema}
	\label{fig:doi-schema}
\end{figure}


\section{Changes from Previous Versions}

No previous versions yet.
% these would be subsections "Changes from v. WD-..."
% Use itemize environments.

\clearpage
\begin{admonition}{Note}
	All dataset citations in this document were created using BibTeX. The BibTeX for the data/service/collection DOIs is based upon the \texttt{verbatim} metadata supplied by the archive to their choice of DOI registration services as expressed by the doi2bib service\footnote{\url{https://doi2bib.org}}. The doi2bib service was selected because it does the best job protecting unfielded "author" names from complete BibTeX annihilation.
	Every other reference BibTeX came from NASA ADS\footnote{\url{https://ui.adsabs.harvard.edu/}}.
\end{admonition}

%\bibliography{ivoatex/ivoabib,ivoatex/docrepo,local}
\bibliography{DOI4Archives}
	
\end{document}
